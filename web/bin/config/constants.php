<?php
	/**
	 * MongoDB : MDB_PASSWORD MDB_HOST MDB_USER MDB_PREFIX
	 * socket.io : SOCKETIO_PORT SOCKETIO_HOST
	 * ENVIRONEMENT : PROD PREPROD PREPROD_LAN
	 * smtp : SMTPDOMAIN
	 */

	// Load environment override constants if present (generated by docker-entrypoint)
	if (file_exists(__DIR__ . '/env_constants.php')) {
		include_once __DIR__ . '/env_constants.php';
	}
	$host = str_replace('www.', '', $_SERVER['HTTP_HOST']);

	switch ($host) {


		case "idae.api.lan":
		default:
			$DOMAIN    = "idae.api.lan";
			$DIRECTORY = "idae.api.lan";

			DEFINE('DOCUMENT_ROOT', $_SERVER['DOCUMENT_ROOT'] . '/');
			DEFINE('ROOT_WWW', "");
			if (!defined('SOCKETIO_PORT')) DEFINE('SOCKETIO_PORT', 3008);
			if (!defined('SOCKETIO_HOST')) DEFINE('SOCKETIO_HOST', 'http://idae.api.lan');

			// MongoDB credentials: can be overridden via environment (see docker-entrypoint.sh)
			if (!defined('MDB_PASSWORD')) DEFINE('MDB_PASSWORD', 'gwetme2011');
			if (!defined('MDB_PREFIX')) DEFINE('MDB_PREFIX', 'maw_'); // tactac_ // crfr_ // maw_ // idaenext_ // idae_io_

			if (!defined('ENVIRONEMENT')) DEFINE('ENVIRONEMENT', 'PREPROD_LAN');

			break;
	}

	$HTTP_PREFIX = (!empty($_SERVER['HTTPS'] ) && $_SERVER['HTTPS'] == 'on') ? 'https://' : 'http://';
	DEFINE('BUSINESS', 'api');// DEFINE('BUSINESS', 'commercial');
	DEFINE('CUSTOMER', 'mydde');// DEFINE('BUSINESS', 'commercial');

	DEFINE('SITEPATH', ROOT_WWW . DOCUMENT_ROOT);
	DEFINE('APPPATH', ROOT_WWW . DOCUMENT_ROOT);
	DEFINE('CUSTOMERPATH', ROOT_WWW . DOCUMENT_ROOT);

	DEFINE('HTTPSITE', $HTTP_PREFIX . $DOMAIN);

	DEFINE('APPNAME', 'idae-api');
	DEFINE('CUSTOMERNAME', 'idaeApi');
	DEFINE('DOCUMENTDOMAIN', $DOMAIN);
	DEFINE('DOCUMENTDOMAINNOPORT', $DOMAIN);
	DEFINE('DOCUMENTDOMAINPORT', '');
	DEFINE('HTTPCUSTOMERSITE', $HTTP_PREFIX . $DOMAIN . '/');
	//
	DEFINE('HTTPAPP', $HTTP_PREFIX . $DOMAIN . '/');
	//
	DEFINE('FLATTENIMGDIR', CUSTOMERPATH . 'images_base/' . CUSTOMERNAME . '/');
	DEFINE('FLATTENIMGHTTP', HTTPCUSTOMERSITE . '/images_base/' . CUSTOMERNAME . '/');
	//
	DEFINE('APP_CONFIG_DIR', APPPATH . 'bin/config/');
	DEFINE('APPMDL', APPPATH . 'bin/idae/mdl/');
	DEFINE('APPLESS', 'appcss/');
	DEFINE('APPTPL', APPPATH . 'bin/templates/');
	DEFINE('PATHTMP', APPPATH . '/tmp/');
	DEFINE('ADODBDIR', APPPATH . '/adodb/');
	DEFINE('REPFONCTIONS_APP', APPPATH . 'bin/functions/');
	DEFINE('XMLDIR', APPPATH . 'xmlfiles/');
	//
	DEFINE("APPCLASSES", APPPATH . "bin/classes/");
	DEFINE("APPCLASSES_ENGINE", APPPATH . "bin/engine/");
	DEFINE("APPCLASSES_VIEWS", APPPATH . "bin/views/");
	DEFINE("APPCLASSES_TOOLS", APPPATH . "bin/tools/");
	DEFINE("APPCLASSES_APP", APPPATH . "bin/classes_app/");
	DEFINE("OLDAPPCLASSES", APPPATH . "classes/");
	DEFINE('REPFONCTIONS', APPPATH . 'bin/functions/');
	//
	DEFINE('APPCLASSES_ORM', APPCLASSES_ENGINE . 'Orm/');
	//
	DEFINE('HTTPHOST', $HTTP_PREFIX . DOCUMENTDOMAIN);
	DEFINE('HTTPHOSTNOPORT', $HTTP_PREFIX . DOCUMENTDOMAINNOPORT);
	//
	DEFINE("SQL_HOST", "localhost");
	DEFINE("SQL_BDD", "crm_general_new");
	DEFINE("SQL_USER", "root");
	DEFINE("SQL_PASSWORD", "redPoi654pied");
	//
	if (!defined('MDB_HOST')) DEFINE("MDB_HOST", "192.168.1.27"); // 192.168.1.27 // 172.20.32.1
	if (!defined('MDB_USER')) DEFINE("MDB_USER", "admin");
	//

	//
	DEFINE('SMTPHOSTGED', 'mail.mydde.fr');
	DEFINE('SMTPUSERGED', 'ged.idae@mydde.fr'); //
	DEFINE('SMTPEMAILGED', 'ged.idae@mydde.fr');
	DEFINE('SMTPPASSGED', 'malaterre654');

	global $buildArr;
	global $IMG_SIZE_ARR;
	/** @deprecated   $IMG_SIZE_ARR */
	$IMG_SIZE_ARR = !empty($IMG_SIZE_ARR) ? $IMG_SIZE_ARR : ['tiny'   => ['150', '70'],
	                                                         'square' => ['150', '150'],
	                                                         'small'  => ['300', '200'],
	                                                         'long'   => ['1100', '100'],
	                                                         'large'  => ['1100', '350']];
	$buildArr     = !empty($buildArr) ? $buildArr : ['tinyy'      => [50, 25],
	                                                 'tiny'       => [150, 70],
	                                                 'smally'     => [68, 68],
	                                                 'squary'     => [70, 70],
	                                                 'largy'      => [325, 215],
	                                                 'largey'     => [325, 215],
	                                                 'wallpapery' => [100, 25]
	];
